#!/bin/sh

{% set devs = (NumberofWANclients | int *DevsPercentage | int *0.01)|int %}
{% set admins = (NumberofWANclients | int *AdminPercentage | int *0.01)|int %}
{% set ops = (NumberofWANclients | int *OpsPercentage | int *0.01)|int %}
# Assign distribution 0-1
# developers=0.5
# operations=0.5

# Runs local scripts
developers () {
   web=0.5
   smb=0.5

   # Run Cronjob and pass assigned weights
   {% for i in range(1, devs | int +1) %}
   docker exec -d clab-{{networkname}}-Client{{i}}-DEVS-WAN chmod +x /Cronjobs.sh
   docker exec -d clab-{{networkname}}-Client{{i}}-DEVS-WAN bash /Cronjobs.sh $web $smb
   {% endfor %}
}

admins () {
   web=0.7
   smb=0.3

   {% for i in range(1, admins | int +1) %}
   docker exec -d clab-{{networkname}}-Client{{i}}-ADMINS-WAN chmod +x /Cronjobs.sh
   docker exec -d clab-{{networkname}}-Client{{i}}-ADMINS-WAN bash /Cronjobs.sh $web $smb
   {% endfor %}
}

operations () {
   web=0.6
   smb=0.4

   {% for i in range(1, ops | int +1) %}
   docker exec -d clab-{{networkname}}-Client{{i}}-OPS-WAN chmod +x /Cronjobs.sh
   docker exec -d clab-{{networkname}}-Client{{i}}-OPS-WAN bash /Cronjobs.sh $web $smb
   {% endfor %}
}

developers

admins

operations