#!/bin/sh

docker exec -d clab-{{networkname}}-br-DMZ sysctl -w net.ipv6.conf.all.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-DMZ sysctl -w net.ipv6.conf.default.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-DMZ sysctl -w net.ipv6.conf.lo.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-DMZ ip link add name bridge1 type bridge
docker exec -d clab-{{networkname}}-br-DMZ ip link set dev bridge1 up
{% for k in range(1, staticinterfaces_br1dmz|int +1) %}
docker exec -d clab-{{networkname}}-br-DMZ brctl addif bridge1 eth{{ k }}
{% endfor %}

docker exec -d clab-{{networkname}}-br-LAN1 sysctl -w net.ipv6.conf.all.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-LAN1 sysctl -w net.ipv6.conf.default.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-LAN1 sysctl -w net.ipv6.conf.lo.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-LAN1 ip link add name bridge2 type bridge
docker exec -d clab-{{networkname}}-br-LAN1 ip link set dev bridge2 up
{% for k in range(1, NumberofLANclients | int + staticinterfaces_br2lan|int +1) %}
docker exec -d clab-{{networkname}}-br-LAN1 brctl addif bridge2 eth{{ k }}
{% endfor %}

docker exec -d clab-{{networkname}}-br-Internet sysctl -w net.ipv6.conf.all.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-Internet sysctl -w net.ipv6.conf.default.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-Internet sysctl -w net.ipv6.conf.lo.disable_ipv6=1
docker exec -d clab-{{networkname}}-br-Internet ip link add name bridge3 type bridge
docker exec -d clab-{{networkname}}-br-Internet ip link set dev bridge3 up
{% for h in range(1, NumberofWANwebclients|int + NumberofWANvpnclients|int + staticinterfaces_br3Internet|int +1) %}
docker exec -d clab-{{networkname}}-br-Internet brctl addif bridge3 eth{{ h }}
{% endfor %}